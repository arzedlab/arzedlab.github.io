<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>V8 Internals: Tree - Arzedlab ğŸªµ</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A conceptual overview of V8â€™s internal structures ..." />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="http://localhost:1313/posts/v8-internals-ebdb3b1b2bdd4cc58f6f1d68382360b6/">
  <meta property="og:site_name" content="Arzedlab ğŸªµ">
  <meta property="og:title" content="V8 Internals: Tree">
  <meta property="og:description" content="A conceptual overview of V8â€™s internal structures ...">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-08-05T00:00:00+00:00">
    <meta property="article:tag" content="V8">
    <meta property="article:tag" content="Tree">
    <meta property="article:tag" content="Internals">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="V8 Internals: Tree">
  <meta name="twitter:description" content="A conceptual overview of V8â€™s internal structures ...">
<script src="http://localhost:1313/js/feather.min.js"></script>
	
	
        <link href="http://localhost:1313/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.7198d56e4fe53ab4610aa7f913b8d3fa7453003ac7791c64a6d6157aecbbced5.css" />

	
	

	
	

	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">Arzedlab ğŸªµ</a>
	</div>
	<nav>
		
		<a href="/">ğŸ  Home</a>
		
		<a href="/posts">ğŸ—‚ï¸ All posts</a>
		
		<a href="/about">ğŸ’¡ About Me</a>
		
		<a href="/papers">ğŸ“‘ Publications</a>
		
		<a href="/tags">ğŸ·ï¸ Tags</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">V8 Internals: Tree</h1>
			<div class="meta">Posted on Aug 5, 2023</div>
		</div>
		

		
		<div class="toc">
		<strong>Table of contents:</strong>
		<nav id="TableOfContents">
  <ul>
    <li><a href="#v8srcapi"><code>v8/src/api</code></a></li>
    <li><a href="#v8srcasmjs"><code>v8/src/asmjs</code></a></li>
    <li><a href="#v8srcast"><code>v8/src/ast</code></a></li>
    <li><a href="#v8srcbase"><code>v8/src/base</code></a></li>
    <li><a href="#v8srcbaseline"><code>v8/src/baseline</code></a></li>
    <li><a href="#v8srcbigint"><code>v8/src/bigint</code></a></li>
    <li><a href="#v8srcbuiltins"><code>v8/src/builtins</code></a></li>
    <li><a href="#v8srccodegen"><code>v8/src/codegen</code></a></li>
    <li><a href="#v8srccommon"><code>v8/src/common</code></a></li>
    <li><a href="#v8srccompiler-dispatcher"><code>v8/src/compiler-dispatcher</code></a></li>
    <li><a href="#v8srccompiler"><code>v8/src/compiler</code></a></li>
    <li><a href="#v8srcd8"><code>v8/src/d8</code></a></li>
    <li><a href="#v8srcdate"><code>v8/src/date</code></a></li>
    <li><a href="#v8srcdebug"><code>v8/src/debug</code></a></li>
    <li><a href="#v8srcdeoptimizer"><code>v8/src/deoptimizer</code></a></li>
    <li><a href="#v8srcdiagnostics"><code>v8/src/diagnostics</code></a></li>
    <li><a href="#v8srcexecution"><code>v8/src/execution</code></a></li>
    <li><a href="#v8srcextensions"><code>v8/src/extensions</code></a></li>
    <li><a href="#v8srcflags"><code>v8/src/flags</code></a></li>
    <li><a href="#v8srcfuzzilli"><code>v8/src/fuzzilli</code></a></li>
    <li><a href="#v8srchandles"><code>v8/src/handles</code></a></li>
    <li><a href="#v8srcheap"><code>v8/src/heap</code></a></li>
    <li><a href="#v8srcic"><code>v8/src/ic</code></a></li>
    <li><a href="#v8srcinit"><code>v8/src/init</code></a></li>
    <li><a href="#v8srcinspector"><code>v8/src/inspector</code></a></li>
    <li><a href="#v8srcinterpreter"><code>v8/src/interpreter</code></a></li>
    <li><a href="#v8srcjson"><code>v8/src/json</code></a></li>
    <li><a href="#v8srclibplatform"><code>v8/src/libplatform</code></a></li>
    <li><a href="#v8srclibsampler"><code>v8/src/libsampler</code></a></li>
    <li><a href="#v8srclogging"><code>v8/src/logging</code></a></li>
    <li><a href="#v8srcmaglev"><code>v8/src/maglev</code></a></li>
    <li><a href="#v8srcnumbers"><code>v8/src/numbers</code></a></li>
    <li><a href="#v8srcobjects"><code>v8/src/objects</code></a></li>
    <li><a href="#v8srcparsing"><code>v8/src/parsing</code></a></li>
    <li><a href="#v8srcprofiler"><code>v8/src/profiler</code></a></li>
    <li><a href="#v8srcprotobuf"><code>v8/src/protobuf</code></a></li>
    <li><a href="#v8srcregexp"><code>v8/src/regexp</code></a></li>
    <li><a href="#v8srcroots"><code>v8/src/roots</code></a></li>
    <li><a href="#v8srcruntime"><code>v8/src/runtime</code></a></li>
    <li><a href="#v8srcsandbox"><code>v8/src/sandbox</code></a></li>
    <li><a href="#v8srcsnapshot"><code>v8/src/snapshot</code></a></li>
    <li><a href="#v8srcstrings"><code>v8/src/strings</code></a></li>
    <li><a href="#v8srctasks"><code>v8/src/tasks</code></a></li>
    <li><a href="#v8srctemporal"><code>v8/src/temporal</code></a></li>
    <li><a href="#v8srcthird_party"><code>v8/src/third_party</code></a></li>
    <li><a href="#v8srctorque"><code>v8/src/torque</code></a></li>
    <li><a href="#v8srctracing"><code>v8/src/tracing</code></a></li>
    <li><a href="#v8srctrap-handler"><code>v8/src/trap-handler</code></a></li>
    <li><a href="#v8srcutils"><code>v8/src/utils</code></a></li>
    <li><a href="#v8srcwasm"><code>v8/src/wasm</code></a></li>
    <li><a href="#v8srczone"><code>v8/src/zone</code></a></li>
  </ul>
</nav>
		</div>

		<section class="body">
			<h1 id="v8-source-tree">V8 source tree</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>v8<span style="color:#ff79c6">/</span>
</span></span><span style="display:flex;"><span>â”œâ”€ src<span style="color:#ff79c6">/</span>
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [api]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [asmjs]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [ast]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [base]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [baseline]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [bigint]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [builtins]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [codegen]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [common]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [compiler<span style="color:#ff79c6">-</span>dispatcher]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [compiler]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [d8]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [date]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [debug]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [deoptimizer]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [diagnostics]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [execution]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [extensions]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [flags]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [fuzzilli]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [handles]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [heap]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [ic]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [init]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [inspector]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [interpreter]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [json]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [libplatform]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [libsampler]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [logging]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [maglev]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [numbers]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [objects]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [parsing]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [profiler]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [protobuf]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [regexp]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [roots]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [runtime]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [sandbox]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [snapshot]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [strings]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [tasks]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [temporal]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [third_party]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [torque]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [tracing]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [trap<span style="color:#ff79c6">-</span>handler]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [utils]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [wasm]
</span></span><span style="display:flex;"><span>â”‚  â”œâ”€ [zone]
</span></span><span style="display:flex;"><span>â”œâ”€ third_party<span style="color:#ff79c6">/</span>
</span></span></code></pre></div><h2 id="v8srcapi"><code>v8/src/api</code></h2>
<p>The <code>v8/src/api</code> directory in the V8 codebase is part of the V8 API. The V8 API provides functions for compiling and executing scripts, accessing C++ methods and data structures, handling errors, and enabling security checksÂ¹.</p>
<p>Your application can use V8 just like any other C++ library. Your C++ code accesses V8 through the V8 API by including the header <code>include/v8.h</code>Â¹. This allows you to embed V8 in your C++ program and run a JavaScript program from itÂ³.</p>
<p>For example, you can make your own applicationâ€™s C++ objects and methods available to JavaScript, and make JavaScript objects and functions available to your C++ applicationÂ¹. This is particularly useful for applications that want to provide a scripting interface or take advantage of the V8 JavaScript engineÂ³.</p>
<p>(1) Getting started with embedding V8 Â· V8. <a href="https://v8.dev/docs/embed">https://v8.dev/docs/embed</a>.
(2) Explain V8 engine in Node.js - GeeksforGeeks. <a href="https://www.geeksforgeeks.org/explain-v8-engine-in-node-js/">https://www.geeksforgeeks.org/explain-v8-engine-in-node-js/</a>.</p>
<h2 id="v8srcasmjs"><code>v8/src/asmjs</code></h2>
<p>The <code>v8/src/asmjs</code> directory in the V8 JavaScript engine&rsquo;s codebase is related to <code>asm.js</code>. <code>asm.js</code> is a subset of JavaScript designed to allow computer software written in languages such as C to be run as web applications while maintaining performance characteristics considerably better than standard JavaScriptÂ².</p>
<p>It&rsquo;s typically used as an intermediate language, generated through the use of a compiler that takes source code in a language such as C++ and outputs <code>asm.js</code>. This allows the code to run with performance characteristics closer to that of native code than standard JavaScriptÂ².</p>
<p>(1) asm.js - Wikipedia. <a href="https://en.wikipedia.org/wiki/Asmjs">https://en.wikipedia.org/wiki/Asmjs</a>.
(2) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.</p>
<h2 id="v8srcast"><code>v8/src/ast</code></h2>
<p>The <code>v8/src/ast</code> directory of the V8 JavaScript engine contains the code related to the Abstract Syntax Tree (AST). The AST is a crucial part of the V8 engine as it represents the structure of the JavaScript codeÂ².</p>
<p>When V8 compiles JavaScript code, it first transforms the code into an AST. This AST is then used to generate machine codeÂ³. If you&rsquo;re willing to modify V8 and compile your own version of it, you can access the AST in the <code>compiler.cc</code> file where <code>MakeCode</code> is called throughout <code>MakeFunctionInfo</code>. This function transforms the AST that is stored in the passed-in <code>CompilationInfo</code> object into native codeÂ².</p>
<p>(1) Access the Abstract Syntax Tree of V8 Engine - Stack Overflow. <a href="https://stackoverflow.com/questions/9451067/access-the-abstract-syntax-tree-of-v8-engine">https://stackoverflow.com/questions/9451067/access-the-abstract-syntax-tree-of-v8-engine</a>.
(2) How V8 JavaScript engine works step by step [with diagram] - Medium. <a href="https://cabulous.medium.com/how-v8-javascript-engine-works-5393832d80a7">https://cabulous.medium.com/how-v8-javascript-engine-works-5393832d80a7</a>.
(3) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.
(4) V8 docs. <a href="https://v8.dev/docs">https://v8.dev/docs</a>.
(5) Source Code. <a href="https://chromium.googlesource.com/v8/v8/+/main/src/ast/ast.h">https://chromium.googlesource.com/v8/v8/+/main/src/ast/ast.h</a>.</p>
<h2 id="v8srcbase"><code>v8/src/base</code></h2>
<p>The <code>v8/src/base</code> directory in the V8 codebase typically contains base utility classes and functions that are used across the V8 engine. However, the specific contents and their purposes can vary as the codebase evolves.</p>
<p>(1) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.
(2) Documentation Â· V8. <a href="https://v8.dev/docs">https://v8.dev/docs</a>.
(3) Checking out the V8 source code Â· V8. <a href="https://v8.dev/docs/source-code">https://v8.dev/docs/source-code</a>.</p>
<h2 id="v8srcbaseline"><code>v8/src/baseline</code></h2>
<p>The <code>v8/src/baseline</code> directory in the V8 codebase is related to the Liftoff compiler, which is a baseline compiler for WebAssembly in V8Â¹.</p>
<p>The goal of Liftoff is to reduce startup time for WebAssembly-based apps by generating code as fast as possible. Code quality is secondary, as hot code is eventually recompiled with TurboFan anywayÂ¹. Liftoff avoids the time and memory overhead of constructing an intermediate representation (IR) and generates machine code in a single pass over the bytecode of a WebAssembly functionÂ¹.</p>
<p>With Liftoff and TurboFan, V8 now has two compilation tiers for WebAssembly: Liftoff as the baseline compiler for fast startup and TurboFan as optimizing compiler for maximum performanceÂ¹. This is likely the purpose of the <code>v8/src/baseline</code> directory.</p>
<p>(1) Liftoff: a new baseline compiler for WebAssembly in V8 Â· V8. <a href="https://v8.dev/blog/liftoff">https://v8.dev/blog/liftoff</a>.
(2) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.
(3) WebAssembly compilation pipeline Â· V8. <a href="https://v8.dev/docs/wasm-compilation-pipeline">https://v8.dev/docs/wasm-compilation-pipeline</a>.</p>
<h2 id="v8srcbigint"><code>v8/src/bigint</code></h2>
<p>The <code>v8/src/bigint</code> directory in V8 is dedicated to the implementation of BigIntsÂ¹Â². BigInts are a numeric primitive in JavaScript that can represent integers with arbitrary precisionÂ². This means they can safely store and operate on large integers, even beyond the safe integer limit for NumbersÂ².</p>
<p>The BigInts are stored in memory as objects, large enough to hold all the BigInt&rsquo;s bits, in a series of chunks, which are called &ldquo;digits&quot;Â¹. These digits range from 0 to 4294967295.</p>
<p>(1) Adding BigInts to V8 Â· V8. <a href="https://v8.dev/blog/bigint">https://v8.dev/blog/bigint</a>.
(2) BigInt: arbitrary-precision integers in JavaScript Â· V8. <a href="https://v8.dev/features/bigint">https://v8.dev/features/bigint</a>.</p>
<h2 id="v8srcbuiltins"><code>v8/src/builtins</code></h2>
<p>The <code>v8/src/builtins</code> directory in V8 is dedicated to the implementation of built-in functionsÂ¹Â². Built-in functions in V8 come in different flavors with respect to implementation, depending on their functionality, performance requirements, and sometimes plain historical developmentÂ¹.</p>
<p>Built-ins in V8 can be seen as chunks of code that are executable by the VM at runtimeÂ². A common use case is to implement the functions of built-in objects (such as RegExp or Promise), but built-ins can also be used to provide other internal functionality (e.g., as part of the IC system)Â².</p>
<p>V8â€™s built-ins can be implemented using a number of different methods, each with different trade-offsÂ²:</p>
<ul>
<li><strong>Platform-dependent assembly language</strong>: Can be highly efficient, but need manual ports to all platforms and are difficult to maintain.</li>
<li><strong>C++</strong>: Very similar in style to runtime functions and have access to V8â€™s powerful runtime functionality, but usually not suited to performance-sensitive areas.</li>
<li><strong>JavaScript</strong>: Concise and readable code, access to fast intrinsics, but frequent usage of slow runtime calls, subject to unpredictable performance through type pollution, and subtle issues around (complicated and non-obvious) JS semantics.</li>
<li><strong>CodeStubAssembler</strong>: Provides efficient low-level functionality that is very close to assembly language while remaining platform-independent and preserving readabilityÂ².</li>
</ul>
<p>(1) Built-in functions Â· V8. <a href="https://v8.dev/docs/builtin-functions">https://v8.dev/docs/builtin-functions</a>.
(2) Builtins - Google Open Source. <a href="https://chromium.googlesource.com/external/github.com/v8/v8.wiki/+/30daab8a92562c331c93470f54877fa02b9422b5/CodeStubAssembler-Builtins.md">https://chromium.googlesource.com/external/github.com/v8/v8.wiki/+/30daab8a92562c331c93470f54877fa02b9422b5/CodeStubAssembler-Builtins.md</a>.
(3) V8 Torque builtins Â· V8. <a href="https://v8.dev/docs/torque-builtins">https://v8.dev/docs/torque-builtins</a>.
(4) undefined. <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>.</p>
<h2 id="v8srccodegen"><code>v8/src/codegen</code></h2>
<p>The <code>v8/src/codegen</code> directory in the V8 codebase is part of the V8 JavaScript EngineÂ¹.</p>
<p>The term &lsquo;codegen&rsquo; typically refers to the process of generating machine code from an intermediate representation (like bytecode). This is a crucial part of how JavaScript engines like V8 work. They take JavaScript code, convert it into an intermediate form, then generate machine code that can be executed by the host system.</p>
<h2 id="v8srccommon"><code>v8/src/common</code></h2>
<p>The <code>v8/src/common</code> directory is part of the V8 JavaScript Engine&rsquo;s source codeÂ¹.</p>
<p>In general, directories within a project&rsquo;s source code serve to organize related files and code modules. For instance, the <code>src</code> directory typically contains the source files for the project. A <code>common</code> subdirectory would usually contain code modules or files that are shared across multiple parts of the project.</p>
<p>(1) Getting Around the Chromium Source Code Directory Structure. <a href="https://www.chromium.org/developers/how-tos/getting-around-the-chrome-source-code/">https://www.chromium.org/developers/how-tos/getting-around-the-chrome-source-code/</a>.</p>
<h2 id="v8srccompiler-dispatcher"><code>v8/src/compiler-dispatcher</code></h2>
<p>The <code>v8/src/compiler-dispatcher</code> directory is part of the V8 JavaScript engine&rsquo;s source code.</p>
<p>The V8 engine compiles JavaScript into machine code before executing it, rather than interpreting it in real-time. This leads to faster execution and better performance. The <code>compiler-dispatcher</code> directory likely contains code related to managing and dispatching these compilation tasksÂ¹.</p>
<p>(1) src/compiler-dispatcher/compiler-dispatcher.h - v8/v8 - Git at Google. <a href="https://chromium.googlesource.com/v8/v8/+/973ec26eb174ad434a04836b93aa739e320ae89d/src/compiler-dispatcher/compiler-dispatcher.h">https://chromium.googlesource.com/v8/v8/+/973ec26eb174ad434a04836b93aa739e320ae89d/src/compiler-dispatcher/compiler-dispatcher.h</a>.</p>
<h2 id="v8srccompiler"><code>v8/src/compiler</code></h2>
<p>The <code>v8/src/compiler</code> directory in the V8 JavaScript Engine&rsquo;s source code is dedicated to the implementation of the V8 compilerÂ¹Â².</p>
<p>V8 is Google&rsquo;s open-source JavaScript and WebAssembly engine, written in C++Â¹Â². It compiles and executes JavaScript source code, handles memory allocation for objects, and garbage collects objects it no longer needsÂ².</p>
<p>The <code>compiler</code> directory contains the source code for the V8 compiler, which is responsible for translating JavaScript code into machine code that can be executed by the host systemÂ¹Â². This process involves several steps, including parsing the JavaScript code, optimizing it for performance, and finally generating the machine codeÂ¹Â².</p>
<h2 id="v8srcd8"><code>v8/src/d8</code></h2>
<p>The <code>v8/src/d8</code> directory in the V8 JavaScript Engine&rsquo;s source code is dedicated to the implementation of the <code>d8</code> shellÂ¹Â².</p>
<p><code>d8</code> is a simple shell for V8 JavaScript engineÂ¹. It&rsquo;s used for debugging and testing JavaScript and WebAssemblyÂ¹. The <code>d8</code> shell can be run standalone, or it can be embedded into any C++ applicationÂ².</p>
<p>(1) V8 Installation and d8 shell usage Â· GitHub. <a href="https://gist.github.com/kevincennis/0cd2138c78a07412ef21">https://gist.github.com/kevincennis/0cd2138c78a07412ef21</a>.</p>
<h2 id="v8srcdate"><code>v8/src/date</code></h2>
<p>Date and timezone functions</p>
<h2 id="v8srcdebug"><code>v8/src/debug</code></h2>
<p>The <code>v8/src/debug</code> directory in V8 is related to the debugging functionality provided by V8. Users usually interact with the V8 debugger through the Chrome DevTools interface. Embedders (including DevTools) need to rely directly on the Inspector ProtocolÂ¹.</p>
<p>The <code>v8/src/debug</code> directory contains the necessary code to establish communication channels for messages sent from the embedder to V8 and from V8 to the embedderÂ¹. This allows for interaction with the Inspector through d8Â¹.</p>
<p>For example, d8 forwards inspector messages to JavaScript. The following code implements a basic, but fully functional interaction with the Inspector through d8Â¹:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#6272a4">// inspector-demo.js
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// Receiver function called by d8.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">function</span> receive(message) {
</span></span><span style="display:flex;"><span>  print(message)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">const</span> msg <span style="color:#ff79c6">=</span> JSON.stringify({
</span></span><span style="display:flex;"><span>  id<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">0</span>,
</span></span><span style="display:flex;"><span>  method<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Debugger.enable&#39;</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// Call the function provided by d8.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>send(msg);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// Run this file by executing &#39;d8 --enable-inspector inspector-demo.js&#39;.
</span></span></span></code></pre></div><p>This directory is crucial for providing debugging support in V8Â¹.</p>
<p>(1) Debugging over the V8 Inspector Protocol Â· V8. <a href="https://v8.dev/docs/inspector">https://v8.dev/docs/inspector</a>.</p>
<h2 id="v8srcdeoptimizer"><code>v8/src/deoptimizer</code></h2>
<p>The <code>v8/src/deoptimizer</code> in the V8 Chrome engine is related to the process of deoptimization. Deoptimization is a mechanism in the V8 JavaScript engine that allows it to optimize JavaScript execution by making certain assumptions about the code it&rsquo;s executing. If these assumptions turn out to be incorrect, the engine needs to revert, or &ldquo;deoptimize&rdquo;, the codeÂ¹.</p>
<p>There are two types of deoptimization: eager and lazyÂ¹. Eager deoptimization happens when the currently executing function has to be deoptimized. Lazy deoptimization, which is what <code>v8/src/deoptimizer</code> is primarily concerned with, is a &ldquo;scheduled&rdquo; deoptimization of a function that currently has one or more activations on the stack, but isn&rsquo;t the currently executing functionÂ¹.</p>
<p>In lazy deoptimization, the code has been marked as dependent on some assumption which is checked elsewhere and can trigger deoptimization the next time the code is executedÂ¹. Deoptimizing implies having to rewrite the stack frame&rsquo;s contents, which is prohibitively difficult to do for any non-topmost stack frames, so such functions are marked for deoptimization, and will get deoptimized as soon as control returns to them (i.e., when they become the topmost stack frame)Â¹.</p>
<p>In summary, the <code>v8/src/deoptimizer</code> plays a crucial role in the V8 engine&rsquo;s ability to optimize JavaScript execution by providing a mechanism to safely revert optimizations when necessary. This contributes to the V8 engine&rsquo;s overall performance and efficiency in executing JavaScript code.</p>
<p>(1) In V8, what is lazy deoptimization, and how does it happen?. <a href="https://stackoverflow.com/questions/70514415/in-v8-what-is-lazy-deoptimization-and-how-does-it-happen">https://stackoverflow.com/questions/70514415/in-v8-what-is-lazy-deoptimization-and-how-does-it-happen</a>.</p>
<h2 id="v8srcdiagnostics"><code>v8/src/diagnostics</code></h2>
<p>The <code>v8/src/diagnostics</code> directory in the V8 Chrome engine is related to the diagnostic tools and functionalities of the V8 engine.</p>
<p>Diagnostic tools are crucial for the maintenance and optimization of a JavaScript engine like V8. They can provide insights into the performance of the engine, help identify bottlenecks or inefficiencies, and assist developers in debugging issues.</p>
<h2 id="v8srcexecution"><code>v8/src/execution</code></h2>
<p>The <code>v8/src/execution</code> directory in the V8 Chrome engine is likely related to the execution of JavaScript code.</p>
<h2 id="v8srcextensions"><code>v8/src/extensions</code></h2>
<p>The <code>v8/src/extensions</code> directory in the V8 Chrome engine is likely related to the extensions of the V8 engine. While there isn&rsquo;t specific documentation available for this directory, it&rsquo;s safe to assume that it contains code related to the extension mechanisms provided by the V8 engine.</p>
<p>Extensions in V8 could refer to additional functionalities or modules that can be added to the V8 engine to extend its capabilities. These could include additional APIs, debugging tools, or other features that are not part of the core V8 engine but can be added as needed.</p>
<h2 id="v8srcflags"><code>v8/src/flags</code></h2>
<p>The <code>v8/src/flags</code> directory in the V8 Chrome engine is likely related to the handling of flags in the V8 engine. Flags in V8 are used to enable or disable certain features or behaviors of the engineâµ. They can be used for debugging, development, and performance tuningâ´.</p>
<p>Flags can be passed to the V8 engine at startup to configure its behaviorâ´. For example, a flag could be used to enable a new optimization feature, to set the size of the memory heap, or to enable additional logging or profilingâ´.</p>
<p><a href="https://chromium.googlesource.com/v8/v8/+/master/src/flag-definitions.h">https://chromium.googlesource.com/v8/v8/+/master/src/flag-definitions.h</a></p>
<p>Spoiler: there&rsquo;s nothing in there that you&rsquo;d want to mess with. Most flags are for debugging and development. When it makes sense to turn on a flag, we turn it on by default.</p>
<p>You can also have a look at</p>
<p><a href="https://www.chromium.org/developers/how-tos/run-chromium-with-flags">https://www.chromium.org/developers/how-tos/run-chromium-with-flags</a></p>
<p>Normally you don&rsquo;t want to mess with these if you are not actively working on V8/Chromium.</p>
<p>Running d8 with &lsquo;&ndash;help&rsquo; will also show you the available flags with a short description.</p>
<p>The <code>v8/src/flags</code> directory likely contains the code that defines these flags and handles their parsing and application.</p>
<p>(1) V8 Flags - Google Groups. <a href="https://groups.google.com/g/v8-users/c/VLZxrhv-wks">https://groups.google.com/g/v8-users/c/VLZxrhv-wks</a>.
(2) undefined. <a href="https://chromium.googlesource.com/v8/v8/+/master/src/flag-definitions.h">https://chromium.googlesource.com/v8/v8/+/master/src/flag-definitions.h</a>.</p>
<h2 id="v8srcfuzzilli"><code>v8/src/fuzzilli</code></h2>
<p>The <code>v8/src/fuzzilli</code> directory in the V8 Chrome engine is related to Fuzzilli, a JavaScript engine fuzzerÂ¹. Fuzzilli is a (coverage-)guided fuzzer for dynamic language interpreters based on a custom intermediate language (&ldquo;FuzzIL&rdquo;) which can be mutated and translated to JavaScriptÂ¹.</p>
<p>Fuzzilli is used to find bugs in JavaScript enginesÂ¹. It generates JavaScript samples that are specifically designed to discover type confusion bugsÂ³. This design allows the fuzzer to scale to many cores on a single machine as well as to many different machinesÂ¹.</p>
<p>In summary, the <code>v8/src/fuzzilli</code> directory contains the Fuzzilli fuzzer.</p>
<p>(1) GitHub - googleprojectzero/fuzzilli: A JavaScript Engine Fuzzer. <a href="https://github.com/googleprojectzero/fuzzilli">https://github.com/googleprojectzero/fuzzilli</a>.
(2) Fuzzing JavaScript Engines with Fuzzilli Â· Doyensec&rsquo;s Blog. <a href="https://blog.doyensec.com/2020/09/09/fuzzilli-jerryscript.html">https://blog.doyensec.com/2020/09/09/fuzzilli-jerryscript.html</a>.</p>
<h2 id="v8srchandles"><code>v8/src/handles</code></h2>
<p>The <code>v8/src/handles</code> directory in the V8 Chrome engine is related to the handling of handles in the V8 engine. In V8, handles are pointers used to manage JavaScript objectsÂ¹. They are a key part of V8&rsquo;s garbage collection mechanismÂ¹.</p>
<p>Handles provide a way for the V8 engine to track and manage JavaScript objects. When a JavaScript object is created, a handle is also created for that objectÂ¹. This handle is then used by the V8 engine to reference and manipulate the JavaScript objectÂ¹.</p>
<p>The <code>v8/src/handles</code> directory likely contains the code that manages these handles. This could include the creation and deletion of handles, as well as other operations that involve handlesÂ¹.</p>
<h2 id="v8srcheap"><code>v8/src/heap</code></h2>
<p>The <code>v8/src/heap</code> directory in the V8 Chrome engine is related to the management of the heap memory allocationÂ³. The V8 engine&rsquo;s heap is where it allocates memory for objects.</p>
<p>V8 has a hard limit on its heap sizeÂ¹. This serves as a safeguard against applications with memory leaksÂ¹. When an application reaches this hard limit, V8 does a series of last resort garbage collectionsÂ¹. If the garbage collections do not help to free memory, V8 stops execution and reports an out-of-memory failureÂ¹.</p>
<p>The <code>v8/src/heap</code> directory likely contains the code that manages these aspects of memory management. This could include the creation and deletion of memory spaces, as well as other operations that involve memory managementÂ¹.</p>
<p>However, the exact contents and functionalities provided by <code>v8/src/heap</code> can vary between different versions of the V8 engine. For the most accurate information, it&rsquo;s recommended to refer to the source code or the official V8 documentationÂ¹Â².</p>
<p>(1) Working of JavaScriptâ€™s Chrome V8 Engine - Medium. <a href="https://medium.com/jsblend/working-of-javascripts-chrome-v8-engine-8eb5ca102a2a">https://medium.com/jsblend/working-of-javascripts-chrome-v8-engine-8eb5ca102a2a</a>.
(2) One small step for Chrome, one giant heap for V8 Â· V8. <a href="https://v8.dev/blog/heap-size-limit">https://v8.dev/blog/heap-size-limit</a>.</p>
<h2 id="v8srcic"><code>v8/src/ic</code></h2>
<p>The <code>v8/src/ic</code> directory in the V8 Chrome engine is related to Inline Caches (ICs). ICs are a fundamental optimization in V8 used to speed up property accessÂ¹.</p>
<p>When V8 is executing JavaScript code and encounters a property access, it doesn&rsquo;t know the shape of the object being accessed. To optimize this, V8 uses ICs to remember the shape of objects from previous property accesses, which can then be used to speed up future accessesÂ¹.</p>
<p>The <code>v8/src/ic</code> directory likely contains the code that manages these ICs. This could include the creation and deletion of ICs, as well as other operations that involve ICsÂ¹.</p>
<h2 id="v8srcinit"><code>v8/src/init</code></h2>
<p>The <code>v8/src/init</code> directory in the V8 Chrome engine is likely related to the initialization of the V8 engine. Initialization is a crucial step in the life cycle of any software component, and for a JavaScript engine like V8, this would involve setting up the necessary state and resources for the engine to execute JavaScript codeÂ¹.</p>
<p>This could include tasks such as setting up memory spaces, initializing internal data structures, setting up the JavaScript global environment, and moreÂ¹. The exact tasks performed during initialization can vary between different versions of the V8 engineÂ¹.</p>
<h2 id="v8srcinspector"><code>v8/src/inspector</code></h2>
<p>The <code>v8/src/inspector</code> directory in the V8 Chrome engine is related to the V8 Inspector Protocol, which provides extensive debugging functionalityÂ¹. Users typically interact with the V8 debugger through the Chrome DevTools interface, while embedders (including DevTools) rely directly on the Inspector ProtocolÂ¹.</p>
<p>The Inspector Protocol allows for communication between V8 and the embedder, enabling the sending and receiving of debugging informationÂ¹. This includes setting up communication channels for messages sent from the embedder to V8 and from V8 to the embedderÂ¹.</p>
<p>(1) Debugging over the V8 Inspector Protocol Â· V8. <a href="https://v8.dev/docs/inspector">https://v8.dev/docs/inspector</a>.</p>
<h2 id="v8srcinterpreter"><code>v8/src/interpreter</code></h2>
<p>The <code>v8/src/interpreter</code> directory in the V8 Chrome engine is related to the V8&rsquo;s interpreter, called Ignition. The interpreter is a key component of V8 that compiles JavaScript code and generates non-optimized machine code.</p>
<p>Ignition generates byte-code, which is good for code that only needs to run once. The byte-code runs inside the JavaScript engine itself. Interpreted code is faster to get something running but is a bit slower.</p>
<p>On runtime, the machine code is analyzed and re-compiled for optimal performance. This process is part of the Just-in-Time (JIT) compilation, which is how V8 achieves its speed.</p>
<p>(1) Deep Dive in to JavaScript Engine - (Chrome V8). <a href="https://dev.to/edisonpappi/how-javascript-engines-chrome-v8-works-50if">https://dev.to/edisonpappi/how-javascript-engines-chrome-v8-works-50if</a>.
(2) What is V8 JavaScript Engine? - StackPath. <a href="https://www.stackpath.com/edge-academy/what-is-v8-javascript-engine/">https://www.stackpath.com/edge-academy/what-is-v8-javascript-engine/</a>.</p>
<h2 id="v8srcjson"><code>v8/src/json</code></h2>
<p>The <code>v8/src/json</code> directory in the V8 Chrome engine is likely related to the handling of JSON (JavaScript Object Notation) data. JSON is a lightweight data-interchange format that is easy for humans to read and write and easy for machines to parse and generateÂ¹.</p>
<p>In the context of a JavaScript engine like V8, JSON data handling would involve parsing JSON data into JavaScript objects, and stringifying JavaScript objects into JSON dataÂ¹. These operations are fundamental for any JavaScript engine, as they enable JavaScript code to interact with JSON data, which is commonly used in web applications for data storage and transferÂ¹.</p>
<p>The <code>v8/src/json</code> directory likely contains the code that manages these JSON-related operations.</p>
<h2 id="v8srclibplatform"><code>v8/src/libplatform</code></h2>
<p>The <code>v8/src/libplatform</code> directory in the V8 Chrome engine is likely related to the platform-specific code in the V8 engine. This could include code that deals with threading, event loops, and other platform-specific operationsÂ¹Â².</p>
<h2 id="v8srclibsampler"><code>v8/src/libsampler</code></h2>
<p>The <code>v8/src/libsampler</code> directory in the V8 Chrome engine is likely related to the sampling profiler in the V8 engine. A sampling profiler periodically samples what code is currently being executed by the engineÂ¹Â². This can be used to understand where the engine spends most of its time, which can be useful for identifying performance bottlenecksÂ¹.</p>
<h2 id="v8srclogging"><code>v8/src/logging</code></h2>
<p>The <code>v8/src/logging</code> directory in the V8 Chrome engine is related to the logging functionality of the V8 engineÂ¹. Logging is a crucial aspect of any software system, and in the context of a JavaScript engine like V8, it can provide valuable insights into the engine&rsquo;s operationÂ¹.</p>
<p>The logging functionality can be used for various purposes, such as debugging, performance tuning, and understanding the behavior of the engineÂ¹. For example, V8â€™s logging code contains some optimizations to simplify logging state checksÂ¹.</p>
<p>(1) Profiling Chromium with V8 Â· V8. <a href="https://v8.dev/docs/profile-chromium">https://v8.dev/docs/profile-chromium</a>.</p>
<h2 id="v8srcmaglev"><code>v8/src/maglev</code></h2>
<p>The <code>v8/src/maglev</code> directory in the V8 Chrome engine is related to Maglev, a new optimizing compiler introduced in Chrome M117Â¹. Maglev is designed to be a fast optimizing compiler that generates good enough code, fast enoughÂ¹.</p>
<p>Maglev sits between the existing Sparkplug and TurboFan compilers in V8&rsquo;s architectureÂ¹. All JavaScript code is first compiled to Ignition bytecode and executed by interpreting itÂ¹. During execution, V8 tracks how the program behaves, including tracking object shapes and typesÂ¹. Both the runtime execution metadata and bytecode are fed into the optimizing compiler to generate high-performance, often speculative, machine code that runs significantly faster than the interpreter canÂ¹.</p>
<p>Maglev aims to generate very performant machine code very quickly that is faster and can help save battery lifeÂ³. Google reports that Maglev yields around a 7.5% boost to the JetStream benchmark and around a 5% boost for the Speedometer benchmarkÂ³.</p>
<p>In summary, the <code>v8/src/maglev</code> directory plays a crucial role in V8&rsquo;s performance optimization strategy, contributing to the speed and efficiency of JavaScript executionÂ¹.</p>
<p>(1) Maglev - V8â€™s Fastest Optimizing JIT Â· V8. <a href="https://v8.dev/blog/maglev">https://v8.dev/blog/maglev</a>.
(2) Google Chrome Begins Rollout Of New &ldquo;Maglev&rdquo; Mid-Tier Compiler. <a href="https://www.phoronix.com/news/Google-Chrome-Maglev-Compiler">https://www.phoronix.com/news/Google-Chrome-Maglev-Compiler</a>.
(3) Design Doc: Maglev - a new mid-tier optimising compiler - Google Groups. <a href="https://groups.google.com/g/v8-dev/c/pcmkHmznjPM">https://groups.google.com/g/v8-dev/c/pcmkHmznjPM</a>.
(4) New Chrome Maglev compiler boosts Speedometer, Jetstream - 9to5Google. <a href="https://9to5google.com/2023/06/02/chrome-maglev-benchmarks/">https://9to5google.com/2023/06/02/chrome-maglev-benchmarks/</a>.</p>
<h2 id="v8srcnumbers"><code>v8/src/numbers</code></h2>
<p>The <code>v8/src/numbers</code> directory in the V8 Chrome engine likely contains the implementation of number-related functionalitiesÂ¹. This could include the handling of different number types in JavaScript, such as integers and floating-point numbers, and the implementation of number-related operationsÂ¹.</p>
<h2 id="v8srcobjects"><code>v8/src/objects</code></h2>
<p>The <code>v8/src/objects</code> directory in the V8 JavaScript engine source code contains the implementation of all the data types, operators, objects, and functions specified in the ECMA standard.</p>
<h2 id="v8srcparsing"><code>v8/src/parsing</code></h2>
<p>The <code>v8/src/parsing</code> directory in the V8 engine source code is primarily responsible for parsing JavaScript code. Here&rsquo;s a brief overview of its role:</p>
<ol>
<li><strong>Parsing JavaScript Code</strong>: The first step in executing JavaScript code is to parse it into an Abstract Syntax Tree (AST). The V8&rsquo;s parser, which resides in the <code>v8/src/parsing</code> directory, does this jobÂ²â´.</li>
<li><strong>Lexical Analysis</strong>: Before the code is parsed into an AST, it is first converted into tokens in a process known as Lexical AnalysisÂ². A Scanner consumes a stream of Unicode characters, combines them into tokens, and removes all whitespace, newlines, and commentsÂ².</li>
<li><strong>Syntactical Analysis</strong>: Once the engine converts your code into tokens, it&rsquo;s time to convert it into an Abstract Syntax Tree. This phase is called Syntax AnalysisÂ². The tokens are converted into an Abstract Syntax Tree using V8&rsquo;s Parser and the language syntax validation also happens during this phaseÂ².</li>
<li><strong>Generating Bytecode</strong>: Once the AST is generated, it is sent to Ignition (another component of the V8 engine) which converts it into bytecodeÂ². This bytecode is then interpreted and executedÂ².</li>
</ol>
<p>In summary, the <code>v8/src/parsing</code> directory contains the code that is responsible for the initial stages of processing JavaScript code, converting it from raw text into a format that can be efficiently executed by the V8 engine. It&rsquo;s a crucial part of how V8 worksÂ².</p>
<p>(1) Chrome V8 Engine - Working - DEV Community. <a href="https://dev.to/khattakdev/chrome-v8-engine-working-1lgi">https://dev.to/khattakdev/chrome-v8-engine-working-1lgi</a>.
(2) Basics of understanding Chromeâ€™s V8 Engine - Medium. <a href="https://medium.com/@duartekevin91/basics-of-understanding-chromes-v8-engine-c5c8ec61fa6b">https://medium.com/@duartekevin91/basics-of-understanding-chromes-v8-engine-c5c8ec61fa6b</a>.
(3) Documentation Â· V8. <a href="https://v8.dev/docs">https://v8.dev/docs</a>.
(4) What is Chrome V8? | Cloudflare. <a href="https://www.cloudflare.com/learning/serverless/glossary/what-is-chrome-v8/">https://www.cloudflare.com/learning/serverless/glossary/what-is-chrome-v8/</a>.
(5) Letâ€™s Understand Chrome V8: Compiler Workflow, Parser. <a href="https://javascript.plainenglish.io/lets-understand-chrome-v8-compiler-workflow-parser-36941d0ff204">https://javascript.plainenglish.io/lets-understand-chrome-v8-compiler-workflow-parser-36941d0ff204</a>.</p>
<h2 id="v8srcprofiler"><code>v8/src/profiler</code></h2>
<p>The <code>v8/src/profiler</code> in the V8 Chrome engine is responsible for profiling the execution of JavaScript and C/C++ code. It&rsquo;s a built-in sample-based profiler that records stacks of both JavaScript and C/C++ codeÂ¹.</p>
<p>Profiling is turned off by default, but can be enabled via the <code>--prof</code> command-line optionÂ¹. When profiling, V8 generates a <code>v8.log</code> file which contains profiling dataÂ¹. This data can be used to find bottlenecks and spot things that are unexpected, such as too much time spent in unoptimized codeÂ³.</p>
<p>The profiler monitors and watches code to optimize itâ´. It includes a data collector called the monitor or profiler which looks for the same code that is executed multiple times like a looping functionâµ. This information is crucial for Just-In-Time (JIT) compilers which run in real time, interpret code, and execute itâµ.</p>
<p>(1) Using V8â€™s sample-based profiler Â· V8. <a href="https://v8.dev/docs/profile">https://v8.dev/docs/profile</a>.
(2) Creating V8 profiling timeline plots - The Chromium Projects. <a href="https://www.chromium.org/developers/creating-v8-profiling-timeline-plots/">https://www.chromium.org/developers/creating-v8-profiling-timeline-plots/</a>.
(3) Profiling Chromium with V8 Â· V8. <a href="https://v8.dev/docs/profile-chromium">https://v8.dev/docs/profile-chromium</a>.</p>
<h2 id="v8srcprotobuf"><code>v8/src/protobuf</code></h2>
<p>The <code>v8/src/protobuf</code> directory in the V8 Chrome engine likely contains the source code for Protocol Buffers (protobuf), a language-neutral, platform-neutral, extensible mechanism for serializing structured data.</p>
<h2 id="v8srcregexp"><code>v8/src/regexp</code></h2>
<p>The <code>v8/src/regexp</code> directory in the V8 Chrome engine contains the implementation of regular expressions (RegExp).</p>
<p>In its default configuration, V8 compiles regular expressions to native code upon the first executionÂ². As part of the work on JIT-less V8, an interpreter for regular expressions was introducedÂ². Interpreting regular expressions has the advantage of using less memory, but it comes with a performance penaltyÂ².</p>
<p>To mitigate this, V8 uses a &rsquo;tier-up&rsquo; strategy for RegExpÂ². Initially, all regular expressions are compiled to bytecode and interpreted, which saves a lot of memoryÂ². If a regular expression with the same pattern is used again, it is considered &lsquo;hot&rsquo; and is recompiled to native codeÂ². From this point on, the execution continues as fast as possibleÂ².</p>
<p>(1) Improving V8 regular expressions Â· V8. <a href="https://v8.dev/blog/regexp-tier-up">https://v8.dev/blog/regexp-tier-up</a>.
(2) Speeding up V8 regular expressions Â· V8. <a href="https://v8.dev/blog/speeding-up-regular-expressions">https://v8.dev/blog/speeding-up-regular-expressions</a>.</p>
<h2 id="v8srcroots"><code>v8/src/roots</code></h2>
<p>The <code>v8/src/roots</code> directory in the V8 JavaScript engine source code is part of the internal implementation of V8. <em>GC roots</em>Â are the special group of objects that are used by the garbage collector as a starting point to determine which objects are eligible for garbage collection.Â <strong>A â€œrootâ€ is simply an object that the garbage collector assumes is reachable by default</strong>, which then has its references traced in order to find all other current objects that are reachable. Any object that is not reachable through any reference chain of any of the root objects is considered unreachable and will eventually be destroyed by the garbage collector.Â <strong>In V8, roots consist of objects in the current call stack</strong>Â (i.e. local variables and parameters of the currently executing function),Â <strong>active V8 handle scopes, global handles, and objects in the compilation cache</strong>.</p>
<h2 id="v8srcruntime"><code>v8/src/runtime</code></h2>
<p>The <code>v8/src/runtime</code> directory in the V8 Chrome engine is part of the V8 runtime. The V8 runtime is the JavaScript engine that parses and executes script codeÂ¹. It provides rules for how memory is accessed, how the program can interact with the computer&rsquo;s operating system, and what program syntax is legalÂ¹.</p>
<p>The runtime environment allows developers to take advantage of modern JavaScript featuresÂ¹â´. It also improves function detectionÂ¹. For example, the new runtime recognizes various function definition formatsÂ¹.</p>
<p>In summary, the <code>v8/src/runtime</code> directory is a crucial part of the V8 engine that enables the parsing and execution of JavaScript code, providing the runtime environment for JavaScript in both browser and server contexts.</p>
<p>(1) V8 Runtime Overview | Apps Script | Google for Developers. <a href="https://developers.google.com/apps-script/guides/v8-runtime">https://developers.google.com/apps-script/guides/v8-runtime</a>.
(2) Chrome V8 Engine - Javascript runtime for Node.js - Janishar Ali. <a href="https://janisharali.com/blog/chrome-v8-engine-javascript-runtime-for-node-js">https://janisharali.com/blog/chrome-v8-engine-javascript-runtime-for-node-js</a>.
(3) Apps Script V8 Runtime Explained For Non-Professional Developers. <a href="https://www.benlcollins.com/apps-script/apps-script-v8-runtime/">https://www.benlcollins.com/apps-script/apps-script-v8-runtime/</a>.
(4) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.
(5) How Node.js V8 runtime is different from what we have on chrome console &hellip;. <a href="https://www.geeksforgeeks.org/how-node-js-v8-runtime-is-different-from-what-we-have-on-chrome-console/">https://www.geeksforgeeks.org/how-node-js-v8-runtime-is-different-from-what-we-have-on-chrome-console/</a>.</p>
<h2 id="v8srcsandbox"><code>v8/src/sandbox</code></h2>
<p>The <code>v8/src/sandbox</code> in the V8 Chrome engine is related to the sandboxing feature of Chrome V8Â³. Sandboxing is a key feature that ensures each process is isolated. This means that JavaScript functions run separately on it and the execution of one piece of code does not affect any other piece of codeÂ³. This isolation helps to maintain the integrity and security of the overall system.</p>
<p>For instance, in Chromium, each renderer is a separate process, and the sandbox built around the renderer process prevents it from writing to a diskâ´. This helps to ensure that potentially harmful or malicious code cannot affect other processes or the system as a wholeâ´.</p>
<h2 id="v8srcsnapshot"><code>v8/src/snapshot</code></h2>
<p>The <code>v8/src/snapshot</code> directory in the V8 JavaScript engine is related to the concept of <strong>startup snapshots</strong>Â².</p>
<p>V8 uses startup snapshots to speed up the initialization of a new JavaScript contextÂ². When a new context is created, all the built-in JavaScript functionality must be set up and initialized into V8â€™s heapÂ². This process can be time-consuming if done from scratchÂ².</p>
<p>To speed things up, V8 uses a shortcut: it deserializes a previously-prepared snapshot directly into the heap to get an initialized contextÂ². This is similar to thawing a frozen pizza for a quick dinnerÂ². On a regular desktop computer, this can bring the time to create a context from 40 ms down to less than 2 msÂ². On an average mobile phone, this could mean a difference between 270 ms and 10 msÂ².</p>
<p>Applications other than Chrome that embed V8 may require more than vanilla JavaScriptÂ². Many load additional library scripts at startup, before the â€œactualâ€ application runsÂ². For example, a simple TypeScript VM based on V8 would have to load the TypeScript compiler on startup in order to translate TypeScript source code into JavaScript on-the-flyÂ². As of the release of V8 v4.3, embedders can utilize snapshotting to skip over the startup time incurred by such an initializationÂ².</p>
<p>However, there are some limitations to this approach. The snapshot can only capture V8â€™s heapÂ². Any interaction from V8 with the outside is off-limits when creating the snapshotÂ². Such interactions include defining and calling API callbacks, creating typed arrays, and values derived from sources such as <code>Math.random</code> or <code>Date.now</code> are fixed once the snapshot has been capturedÂ². They are no longer really random nor reflect the current timeÂ².</p>
<p>(1) Custom startup snapshots Â· V8. <a href="https://v8.dev/blog/custom-startup-snapshots">https://v8.dev/blog/custom-startup-snapshots</a>.
(2) GitHub - v8/v8: The official mirror of the V8 Git repository. <a href="https://github.com/v8/v8">https://github.com/v8/v8</a>.
(3) V8 Snapshots Questions and Clarifications - Google Groups. <a href="https://groups.google.com/g/v8-users/c/SfD5YSpU3Gw">https://groups.google.com/g/v8-users/c/SfD5YSpU3Gw</a>.
(4) What is Chrome V8? | Cloudflare. <a href="https://www.cloudflare.com/learning/serverless/glossary/what-is-chrome-v8/">https://www.cloudflare.com/learning/serverless/glossary/what-is-chrome-v8/</a>.
(5) What is V8 JavaScript Engine? - StackPath. <a href="https://www.stackpath.com/edge-academy/what-is-v8-javascript-engine/">https://www.stackpath.com/edge-academy/what-is-v8-javascript-engine/</a>.</p>
<h2 id="v8srcstrings"><code>v8/src/strings</code></h2>
<p>The <code>v8/src/strings</code> directory in the V8 engine source code is likely to contain the implementation of string operations in V8.</p>
<h2 id="v8srctasks"><code>v8/src/tasks</code></h2>
<p>The <code>v8/src/tasks</code> directory in the V8 Chrome engine likely contains the implementation of task-related functionalitiesÂ¹. This could include task scheduling, task queues, and other related operationsÂ¹.</p>
<p>Tasks in V8 could refer to units of work that the engine needs to perform. These tasks can be scheduled to run at specific times or under specific conditions, and can be used to manage the execution of JavaScript code, garbage collection, and other internal operationsÂ¹.</p>
<h2 id="v8srctemporal"><code>v8/src/temporal</code></h2>
<p>The <code>v8/src/temporal</code> directory in the V8 JavaScript engine source code is likely related to the implementation of the Temporal API, a robust, modern, and feature-rich date/time library for JavaScriptÂ¹Â².</p>
<p>The Temporal API is a proposal for ECMAScript that aims to resolve long-standing issues with <code>Date</code> and libraries like <code>moment.js</code>, <code>date-fns</code>, and <code>luxon</code>Â¹Â². It provides standard objects and functions for working with dates, times, time zones, and durationsÂ¹Â².</p>
<p>The <code>v8/src/temporal</code> directory would contain the C++ implementations of these objects and functions, allowing JavaScript code running on the V8 engine to use the Temporal APIÂ¹Â².</p>
<p>The Temporal API was at Stage 3 of the TC39 process, which means it was a candidate for future inclusion in the ECMAScript standardÂ¹Â². For the most up-to-date information, please refer to the official V8 and TC39 resourcesÂ¹Â².</p>
<h2 id="v8srcthird_party"><code>v8/src/third_party</code></h2>
<p>The <code>v8/src/third_party</code> directory in the V8 engine source code typically contains third-party libraries or components that the V8 engine depends onÂ². These are external pieces of software that are not developed by the V8 team but are essential for the functionality of V8Â².</p>
<p>These third-party components can serve a variety of purposes, depending on what specific functionality they provide. They could offer utility functions, data structures, testing frameworks, or other features that the V8 engine usesÂ².</p>
<p>However, without specific details about the contents of the <code>v8/src/third_party</code> directory, it&rsquo;s difficult to provide a more precise explanation of its purpose. The contents can vary based on the version of V8 and the specific third-party dependencies it uses at that timeÂ².</p>
<p>In general, the use of third-party code allows the V8 team to leverage existing, well-tested functionality instead of having to develop everything from scratch. This can lead to more robust and efficient code, and allows the team to focus on the core functionality of the V8 engineÂ².</p>
<h2 id="v8srctorque"><code>v8/src/torque</code></h2>
<p>The <code>v8/src/torque</code> in the V8 Chrome engine is a domain-specific language that is used to implement builtinsÂ². It was designed to be simple enough to directly translate the ECMAScript specification into an implementation in V8Â¹.</p>
<p>Torque allows developers contributing to the V8 project to express changes in the VM by focusing on the effects of their changes to the VM, rather than preoccupying themselves with unrelated implementation detailsÂ¹. It combines a TypeScript-like syntax that eases both writing and understanding V8 code with syntax and types that reflect concepts that are already common in the CodeStubAssemblerÂ¹.</p>
<p>Torque provides language constructs to represent high-level, semantically-rich tidbits of V8 implementation, and the Torque compiler converts these morsels into efficient assembly code using the CodeStubAssemblerÂ¹. Both Torqueâ€™s language structure and the Torque compilerâ€™s error checking ensure correctness in ways that were previously laborious and error-prone with direct usage of the CodeStubAssemblerÂ¹.</p>
<p>Most source written in Torque is checked into the V8 repository under the <code>src/builtins</code> directory, with the file extension <code>.tq</code>Â¹. Torque definitions of V8&rsquo;s heap-allocated classes are found alongside their C++ definitions, in <code>.tq</code> files with the same name as corresponding C++ files in <code>src/objects</code>Â¹.</p>
<p>(1) V8 Torque builtins Â· V8. <a href="https://v8.dev/docs/torque-builtins">https://v8.dev/docs/torque-builtins</a>.
(2) V8 Torque user manual Â· V8. <a href="https://v8.dev/docs/torque">https://v8.dev/docs/torque</a>.</p>
<h2 id="v8srctracing"><code>v8/src/tracing</code></h2>
<p>The <code>v8/src/tracing</code> directory in the V8 Chrome engine is related to the tracing functionality provided by V8. Tracing in V8 works automatically when V8 is embedded in Chrome through the Chrome tracing systemÂ¹.</p>
<p>Here are some key points about tracing in V8Â¹:</p>
<ul>
<li>You can enable it in any standalone V8 or within an embedder that uses the Default Platform.</li>
<li>To start tracing, use the <code>-enable-tracing</code> option. V8 generates a <code>v8_trace.json</code> that you can open in Chrome.</li>
<li>Each trace event is associated with a set of categories, you can enable/disable the recording of trace events based on their categories.</li>
<li>To enable more categories and have more fine control of the different parameters, you need to pass a config file.</li>
<li>Enabling Runtime Call Statistics (RCS) in tracing requires recording the trace with the following two categories enabled: <code>v8</code> and <code>disabled-by-default-v8.runtime_stats</code>.</li>
<li>To get the GC Object Statistics in tracing, you need to collect a trace with <code>disabled-by-default-v8.gc_stats</code> category enabled also you need to use the following <code>-js-flags</code>: <code>-track_gc_object_stats --noincremental-marking</code>.</li>
</ul>
<p>For more detailed information, you may want to refer to the official V8 documentationÂ¹. Please note that understanding the purpose of specific directories or files in a large codebase like V8 typically requires a deep understanding of the project&rsquo;s architecture and design. If you&rsquo;re interested in contributing to the project, the V8 documentation provides a good starting pointÂ¹.</p>
<p>(1) Tracing V8 Â· V8. <a href="https://v8.dev/docs/trace">https://v8.dev/docs/trace</a>.
(2) Stack trace API Â· V8. <a href="https://v8.dev/docs/stack-trace-api">https://v8.dev/docs/stack-trace-api</a>.</p>
<h2 id="v8srctrap-handler"><code>v8/src/trap-handler</code></h2>
<p>The <code>v8/src/trap-handler</code> directory in the V8 Chrome engine is responsible for handling traps in WebAssembly.</p>
<p>WebAssembly (often abbreviated as wasm) is a binary instruction format for a stack-based virtual machineÂ¹. It is designed as a portable target for the compilation of high-level languages like C, C++, and Rust, enabling deployment on the web for client and server applicationsÂ¹.</p>
<p>A trap in computing refers to a mechanism that interrupts the normal execution flow of a programÂ². This can occur due to various reasons such as illegal operations, privilege violations, or other conditions that require special processingÂ².</p>
<p>The trap handler in V8&rsquo;s WebAssembly implementation is designed to handle these traps and provide a safe execution environmentÂ². It ensures that if a WebAssembly program encounters an error condition, it doesn&rsquo;t crash the entire browser or lead to a security vulnerabilityÂ².</p>
<p>In summary, the <code>v8/src/trap-handler</code> directory plays a crucial role in ensuring the robustness and security of WebAssembly execution in the V8 engineÂ².</p>
<h2 id="v8srcutils"><code>v8/src/utils</code></h2>
<p>The <code>v8/src/utils</code> directory in the V8 JavaScript engine source code is likely to contain utility functions and classes that are used across the V8 codebase. These utilities can include data structures, debugging aids, or other common functionality.</p>
<p>V8 is Google&rsquo;s open-source JavaScript engine that implements ECMAScript as specified in ECMA-262Â¹. It&rsquo;s written in C++ and is used in Google Chrome and other Chromium-based web browsersÂ¹Â³â´âµ. V8 can run standalone or can be embedded into any C++ applicationÂ¹Â².</p>
<p>V8 compiles and executes JavaScript source code, handles memory allocation for objects, and garbage collects objects it no longer needsÂ². Its stop-the-world, generational, accurate garbage collector is one of the keys to V8&rsquo;s performanceÂ².</p>
<h2 id="v8srcwasm"><code>v8/src/wasm</code></h2>
<p>The <code>v8/src/wasm</code> directory in the V8 Chrome engine is part of the WebAssembly (Wasm) implementation in V8Â¹. WebAssembly is a binary format that allows you to run code from programming languages other than JavaScript on the web efficiently and securelyÂ¹.</p>
<p>Here&rsquo;s a brief overview of how it works:</p>
<ol>
<li><strong>Liftoff</strong>: Initially, V8 does not compile any functions in a WebAssembly module. Instead, functions get compiled lazily with the baseline compiler Liftoff when the function gets called for the first timeÂ¹. Liftoff is a one-pass compiler, which means it iterates over the WebAssembly code once and emits machine code immediately for each WebAssembly instructionÂ¹. Liftoff can compile WebAssembly code very fast, tens of megabytes per secondÂ¹.</li>
<li><strong>TurboFan</strong>: Hot functions, which are functions that get executed often, get re-compiled with TurboFan, the optimizing compiler in V8 for both WebAssembly and JavaScriptÂ¹. TurboFan is a multi-pass compiler, which means that it builds multiple internal representations of the compiled code before emitting machine codeÂ¹. These additional internal representations allow optimizations and better register allocations, resulting in significantly faster codeÂ¹.</li>
<li><strong>Code caching</strong>: If the WebAssembly module was compiled with <code>WebAssembly.compileStreaming</code>, then the TurboFan-generated machine code will also get cachedÂ¹. When the same WebAssembly module is fetched again from the same URL then the cached code can be used immediately without additional compilationÂ¹.</li>
</ol>
<p>In summary, the <code>v8/src/wasm</code> directory is a crucial part of the V8 engine that enables the parsing, compilation, and execution of WebAssembly code, providing a runtime environment for WebAssembly in both browser and server contexts.</p>
<p>(1) WebAssembly compilation pipeline Â· V8. <a href="https://v8.dev/docs/wasm-compilation-pipeline">https://v8.dev/docs/wasm-compilation-pipeline</a>.
(2) Experimental support for WebAssembly in V8 Â· V8. <a href="https://v8.dev/blog/webassembly-experimental">https://v8.dev/blog/webassembly-experimental</a>.
(3) Whatâ€™s new in V8 8.6? Better WebAssembly! - Dev Genius. <a href="https://blog.devgenius.io/whats-new-in-v8-8-6-better-webassembly-2a67abd766fa">https://blog.devgenius.io/whats-new-in-v8-8-6-better-webassembly-2a67abd766fa</a>.</p>
<h2 id="v8srczone"><code>v8/src/zone</code></h2>
<p>The <code>v8/src/zone</code> directory in the V8 Chrome engine is related to the concept of a &ldquo;Zone&rdquo; in V8. A Zone is a region of memory used for temporary data that is allocated in the V8 engine during the compilation processÂ¹.</p>
<p>Zones are used as a quick, efficient mechanism for allocating memory for temporary data structures while the engine is running. When the data is no longer needed (typically after the compilation of a function is finished), instead of deallocating each individual object, the entire Zone is discarded at once, which is fasterÂ¹.</p>
<p>This is part of V8&rsquo;s strategy to manage memory and improve performance. However, please note that this is a high-level explanation. For more detailed information, you may want to refer to the official V8 documentation or the V8 source codeÂ¹Â².</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/v8">v8</a></li>
					
					<li><a href="/tags/tree">tree</a></li>
					
					<li><a href="/tags/internals">internals</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/arzedlab/" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://www.linkedin.com/in/ravshan-rikhsiev/" rel="me" title="Linkedin"><i data-feather="linkedin"></i></a>
    <a class="border"></a><a class="soc" href="https://twitter.com/arzedlab/" rel="me" title="Twitter"><i data-feather="twitter"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2025  Â© Ravshan | Made with Love â¤ï¸ <a href="https://twitter.com/arzedlab/"> My Twitter ğŸª½</a>
  </div>
	<script src="/js/wasm_exec.js"></script>
  	<script>
    const go = new Go();

    WebAssembly.instantiateStreaming(fetch("\/js\/main.wasm"), go.importObject)
      .then(result => {
        go.run(result.instance);
      })
      .catch(err => console.error("WASM error:", err));

    
    (function callReady() {
      if (typeof collectVisitor === "function") {
        try { collectVisitor(); console.log("collectVisitor called"); }
        catch (e) { console.error("collectVisitor call failed:", e); }
      } else {
        setTimeout(callReady, 30);
      }
    })();
  </script>
</footer>
<script>
  feather.replace()
</script></div>
    </body>
</html>
